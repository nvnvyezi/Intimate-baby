webpackJsonp([14],{"01ht":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e("P9l9");var s={name:"musicPlayer",data:function(){return{playControl:!0,firstCome:!0,musicList:[],musicName:"",musicUrl:"",imgUrl:"",currentTime:this.timeCovert(0),currentTotalTime:this.timeCovert(0),currenxIndex:0,modeIndex:0,musicSwitch:!1,musicLyric:"",lyric:"",lyricIndex:0}},methods:{timeCovert:function(t){var i=Math.floor(t/60),e=Math.floor(t-60*i);return i<10&&(i="0"+i),e<10&&(e="0"+e),t=i+" : "+e},showMusic:function(){this.musicSwitch=!this.musicSwitch},trackInfo:function(t){var i=this;this.musicName=this.musicList[t].name,this.musicUrl=this.musicList[t].src,this.imgUrl=this.musicList[t].imgUrl,Object(r.r)(this.musicList[t].mid,function(t){t=(t=(t=(new function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(e){var r,s,n,o,c,a,l,d="",u=0;for(e=i(e);u<e.length;)o=(r=e.charCodeAt(u++))>>2,c=(3&r)<<4|(s=e.charCodeAt(u++))>>4,a=(15&s)<<2|(n=e.charCodeAt(u++))>>6,l=63&n,isNaN(s)?a=l=64:isNaN(n)&&(l=64),d=d+t.charAt(o)+t.charAt(c)+t.charAt(a)+t.charAt(l);return d},this.decode=function(i){var r,s,n,o,c,a,l="",d=0;for(i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<i.length;)r=t.indexOf(i.charAt(d++))<<2|(o=t.indexOf(i.charAt(d++)))>>4,s=(15&o)<<4|(c=t.indexOf(i.charAt(d++)))>>2,n=(3&c)<<6|(a=t.indexOf(i.charAt(d++))),l+=String.fromCharCode(r),64!=c&&(l+=String.fromCharCode(s)),64!=a&&(l+=String.fromCharCode(n));return l=e(l)};var i=function(t){t=t.replace(/\r\n/g,"\n");for(var i="",e=0;e<t.length;e++){var r=t.charCodeAt(e);r<128?i+=String.fromCharCode(r):r>127&&r<2048?(i+=String.fromCharCode(r>>6|192),i+=String.fromCharCode(63&r|128)):(i+=String.fromCharCode(r>>12|224),i+=String.fromCharCode(r>>6&63|128),i+=String.fromCharCode(63&r|128))}return i},e=function(t){for(var i="",e=0,r=0,s=0;e<t.length;)if((r=t.charCodeAt(e))<128)i+=String.fromCharCode(r),e++;else if(r>191&&r<224)s=t.charCodeAt(e+1),i+=String.fromCharCode((31&r)<<6|63&s),e+=2;else{s=t.charCodeAt(e+1);var n=t.charCodeAt(e+2);i+=String.fromCharCode((15&r)<<12|(63&s)<<6|63&n),e+=3}return i}}).decode(t)).replace(/[\r\n]/g,"")).replace(/\[/g,"]"),i.musicLyric=t.split("]")})},changeTime:function(){var t=document.getElementById("audio");this.currentTotalTime=this.timeCovert(t.duration)},playStatus:function(){var t=document.getElementById("audio");this.playControl?(this.firstCome&&(this.firstCome=!1,t.load()),t.play()):t.pause(),this.playControl=!this.playControl},playTime:function(){var t=document.getElementById("audio").currentTime;this.currentTime=this.timeCovert(t),document.getElementsByClassName("mus--progressBar")[0].style.width=t/audio.duration*100+"%"},previousMusic:function(){this.lyricIndex=0;var t=document.getElementById("audio");if(0==this.modeIndex&&(t.loop=!1,this.currenxIndex<=0?(this.currenxIndex=this.musicList.length-1,t.childNodes[0].src=null,this.trackInfo(this.currenxIndex),t.load(),this.playControl||t.play()):(t.childNodes[0].src=null,this.trackInfo(--this.currenxIndex),t.load(),this.playControl||t.play())),1==this.modeIndex){for(var i=Math.floor(Math.random()*this.musicList.length);i==this.currenxIndex;)i=Math.floor(Math.random()*this.musicList.length);this.currenxIndex=i,t.childNodes[0].src=null,this.trackInfo(i),t.load(),this.playControl||t.play()}2==this.modeIndex&&(t.loop="loop",this.playControl||t.play())},nextMusic:function(){this.lyricIndex=0;var t=document.getElementById("audio");if(0==this.modeIndex&&(t.loop=!1,this.currenxIndex>=this.musicList.length-1?(this.currenxIndex=0,t.childNodes[0].src=null,this.trackInfo(this.currenxIndex),t.load(),this.playControl||t.play()):(t.childNodes[0].src=null,this.trackInfo(++this.currenxIndex),t.load(),this.playControl||t.play())),1==this.modeIndex){for(var i=Math.floor(Math.random()*this.musicList.length);i==this.currenxIndex;)i=Math.floor(Math.random()*this.musicList.length);this.currenxIndex=i,t.childNodes[0].src=null,this.trackInfo(i),t.load(),this.playControl||t.play()}2==this.modeIndex&&(t.loop="loop",this.playControl||t.play())},playMode:function(){this.modeIndex>=2?this.modeIndex=0:this.modeIndex++}},mounted:function(){var t=this;Object(r.s)(function(i){for(var e=i.result,s=function(i,s){Object(r.w)(e[i].mid,function(r){e[i].imgUrl="https://y.gtimg.cn/music/photo_new/T002R300x300M000"+e[i].albummid+".jpg?max_age=2592000",e[i].src="http://dl.stream.qqmusic.qq.com/"+r.data.items[0].filename+"?vkey="+r.data.items[0].vkey+"&guid=652943595&uin=0&fromtag=66",i==s-1&&(t.musicList=e,t.trackInfo(t.currenxIndex))})},n=0,o=e.length;n<o;n++)s(n,o)})},watch:{currentTime:function(){for(var t=this.lyricIndex,i=this.musicLyric.length;t<i;t++)-1!=this.musicLyric[t].indexOf(this.currentTime.replace(/ /g,""))&&(""!=this.musicLyric[t+1]&&(this.lyric=this.musicLyric[t+1]),this.lyricIndex=t+1)}}},n={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"musicPlayer"},[e("div",{staticClass:"mus--time"},[e("div",{staticClass:"mus--progressBar"}),t._v(" "),e("div",{staticClass:"mus--time--current"},[t._v(t._s(t.currentTime))]),t._v(" "),e("div",{staticClass:"mus--time--total"},[t._v(t._s(t.currentTotalTime))])]),t._v(" "),e("section",{staticClass:"lyric"},[t._v(t._s(t.lyric))]),t._v(" "),e("section",{staticClass:"mus--switch",on:{click:t.showMusic}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.musicSwitch,expression:"musicSwitch"}],staticClass:"mus--container",style:{backgroundImage:"url("+t.imgUrl+")"}},[e("header",{staticClass:"mus--con--name"},[t._v(t._s(t.musicName))]),t._v(" "),e("div",{staticClass:"mus--con--info",class:{mode1:0==t.modeIndex,mode2:1==t.modeIndex,mode3:2==t.modeIndex},on:{click:t.playMode}}),t._v(" "),e("div",{staticClass:"mus--con--controls"},[e("div",{staticClass:"mus--con--cont--previous",on:{click:t.previousMusic}}),t._v(" "),e("div",{class:{"mus--con--cont--play":t.playControl,"mus--con--cont--stop":!t.playControl},on:{click:t.playStatus}}),t._v(" "),e("div",{staticClass:"mus--con--cont--next",on:{click:t.nextMusic}})]),t._v(" "),e("audio",{attrs:{id:"audio"},on:{ended:t.nextMusic,canplay:t.changeTime,timeupdate:t.playTime}},[e("source",{attrs:{src:t.musicUrl,type:""}})])])])},staticRenderFns:[]};var o=e("VU/8")(s,n,!1,function(t){e("BUWC")},"data-v-40ad3ccc",null);i.default=o.exports},BUWC:function(t,i){}});
//# sourceMappingURL=14.92d1027e2828a0b67480.js.map