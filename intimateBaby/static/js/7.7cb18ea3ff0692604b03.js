webpackJsonp([7],{O7Kl:function(t,e){},QQQl:function(t,e){},nH6r:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("P9l9");var o={name:"musicPlayer",props:{musicSwitch:{type:Boolean,default:!1}},data:function(){return{playControl:!0,firstCome:!0,musicList:[],musicName:"",musicUrl:"",imgUrl:"",currentTime:this.timeCovert(0),currentTotalTime:this.timeCovert(0),currenxIndex:0,modeIndex:0,musicLyric:"",lyric:"",lyricIndex:0,showTime:!1,showMusicBox:!0}},methods:{timeCovert:function(t){var e=Math.floor(t/60),s=Math.floor(t-60*e);return e<10&&(e="0"+e),s<10&&(s="0"+s),t=e+" : "+s},showMusic:function(){this.$emit("showMusic")},trackInfo:function(t){var e=this;this.musicName=this.musicList[t].name,this.musicUrl=this.musicList[t].src,this.imgUrl=this.musicList[t].imgUrl,Object(i.t)(this.musicList[t].mid,function(t){t=(t=(t=(new function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(s){var i,o,a,r,n,c,h,l="",m=0;for(s=e(s);m<s.length;)r=(i=s.charCodeAt(m++))>>2,n=(3&i)<<4|(o=s.charCodeAt(m++))>>4,c=(15&o)<<2|(a=s.charCodeAt(m++))>>6,h=63&a,isNaN(o)?c=h=64:isNaN(a)&&(h=64),l=l+t.charAt(r)+t.charAt(n)+t.charAt(c)+t.charAt(h);return l},this.decode=function(e){var i,o,a,r,n,c,h="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)i=t.indexOf(e.charAt(l++))<<2|(r=t.indexOf(e.charAt(l++)))>>4,o=(15&r)<<4|(n=t.indexOf(e.charAt(l++)))>>2,a=(3&n)<<6|(c=t.indexOf(e.charAt(l++))),h+=String.fromCharCode(i),64!=n&&(h+=String.fromCharCode(o)),64!=c&&(h+=String.fromCharCode(a));return h=s(h)};var e=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",s=0;s<t.length;s++){var i=t.charCodeAt(s);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},s=function(t){for(var e="",s=0,i=0,o=0;s<t.length;)if((i=t.charCodeAt(s))<128)e+=String.fromCharCode(i),s++;else if(i>191&&i<224)o=t.charCodeAt(s+1),e+=String.fromCharCode((31&i)<<6|63&o),s+=2;else{o=t.charCodeAt(s+1);var a=t.charCodeAt(s+2);e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a),s+=3}return e}}).decode(t)).replace(/[\r\n]/g,"")).replace(/\[/g,"]"),e.musicLyric=t.split("]")})},changeTime:function(){var t=document.getElementById("audio");this.currentTotalTime=this.timeCovert(t.duration)},playStatus:function(){var t=document.getElementById("audio");this.playControl?(this.firstCome&&(this.firstCome=!1,t.load()),t.play()):t.pause(),this.playControl=!this.playControl},playTime:function(){var t=document.getElementById("audio").currentTime;this.currentTime=this.timeCovert(t),document.getElementsByClassName("mus--progressBar")[0].style.width=t/audio.duration*100+"%"},previousMusic:function(){this.lyricIndex=0;var t=document.getElementById("audio");if(0==this.modeIndex&&(t.loop=!1,this.currenxIndex<=0?(this.currenxIndex=this.musicList.length-1,t.childNodes[0].src=null,this.trackInfo(this.currenxIndex),t.load(),this.playControl||t.play()):(t.childNodes[0].src=null,this.trackInfo(--this.currenxIndex),t.load(),this.playControl||t.play())),1==this.modeIndex){for(var e=Math.floor(Math.random()*this.musicList.length);e==this.currenxIndex;)e=Math.floor(Math.random()*this.musicList.length);this.currenxIndex=e,t.childNodes[0].src=null,this.trackInfo(e),t.load(),this.playControl||t.play()}2==this.modeIndex&&(t.loop="loop",this.playControl||t.play())},nextMusic:function(){this.lyricIndex=0;var t=document.getElementById("audio");if(0==this.modeIndex&&(t.loop=!1,this.currenxIndex>=this.musicList.length-1?(this.currenxIndex=0,t.childNodes[0].src=null,this.trackInfo(this.currenxIndex),t.load(),this.playControl||t.play()):(t.childNodes[0].src=null,this.trackInfo(++this.currenxIndex),t.load(),this.playControl||t.play())),1==this.modeIndex){for(var e=Math.floor(Math.random()*this.musicList.length);e==this.currenxIndex;)e=Math.floor(Math.random()*this.musicList.length);this.currenxIndex=e,t.childNodes[0].src=null,this.trackInfo(e),t.load(),this.playControl||t.play()}2==this.modeIndex&&(t.loop="loop",this.playControl||t.play())},playMode:function(){this.modeIndex>=2?this.modeIndex=0:this.modeIndex++}},mounted:function(){var t=this;Object(i.x)(function(e){for(var s=e.result,o=function(e,o){Object(i.B)(s[e].mid,function(i){s[e].imgUrl="https://y.gtimg.cn/music/photo_new/T002R300x300M000"+s[e].albummid+".jpg?max_age=2592000",s[e].src="http://dl.stream.qqmusic.qq.com/"+i.data.items[0].filename+"?vkey="+i.data.items[0].vkey+"&guid=652943595&uin=0&fromtag=66",e==o-1&&(t.musicList=s,t.trackInfo(t.currenxIndex))})},a=0,r=s.length;a<r;a++)o(a,r)})},watch:{currentTime:function(){for(var t=this.lyricIndex,e=this.musicLyric.length;t<e;t++)-1!=this.musicLyric[t].indexOf(this.currentTime.replace(/ /g,""))&&(""!=this.musicLyric[t+1]&&(this.lyric=this.musicLyric[t+1]),this.lyricIndex=t+1)},playControl:function(t){this.showTime=!this.showTime},$route:function(t){"/bookChapter"==t.path?this.showMusicBox=!1:this.showMusicBox=!0}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMusicBox,expression:"showMusicBox"}],staticClass:"musicPlayer"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showTime,expression:"showTime"}],staticClass:"mus--time"},[s("div",{staticClass:"mus--progressBar"}),t._v(" "),s("div",{staticClass:"mus--time--current"},[t._v(t._s(t.currentTime))]),t._v(" "),s("div",{staticClass:"mus--time--total"},[t._v(t._s(t.currentTotalTime))])]),t._v(" "),s("section",{directives:[{name:"show",rawName:"v-show",value:t.showTime,expression:"showTime"}],staticClass:"mus--photo",style:{backgroundImage:"url("+t.imgUrl+")"}}),t._v(" "),s("section",{directives:[{name:"show",rawName:"v-show",value:t.showTime,expression:"showTime"}],staticClass:"lyric"},[t._v(t._s(t.lyric))]),t._v(" "),s("section",{directives:[{name:"show",rawName:"v-show",value:t.musicSwitch,expression:"musicSwitch"}],staticClass:"mus--switch",on:{click:t.showMusic}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.musicSwitch,expression:"musicSwitch"}],staticClass:"mus--container"},[s("header",{staticClass:"mus--con--name"},[t._v(t._s(t.musicName))]),t._v(" "),s("div",{staticClass:"mus--con--info",class:{mode1:0==t.modeIndex,mode2:1==t.modeIndex,mode3:2==t.modeIndex},on:{click:t.playMode}}),t._v(" "),s("div",{staticClass:"mus--con--controls"},[s("div",{staticClass:"mus--con--cont--previous",on:{click:t.previousMusic}}),t._v(" "),s("div",{class:{"mus--con--cont--play":t.playControl,"mus--con--cont--stop":!t.playControl},on:{click:t.playStatus}}),t._v(" "),s("div",{staticClass:"mus--con--cont--next",on:{click:t.nextMusic}})]),t._v(" "),s("audio",{attrs:{id:"audio"},on:{ended:t.nextMusic,canplay:t.changeTime,timeupdate:t.playTime}},[s("source",{attrs:{src:t.musicUrl,type:""}})])])])},staticRenderFns:[]};var r={components:{music:s("VU/8")(o,a,!1,function(t){s("O7Kl")},"data-v-43e1bd16",null).exports,leftNav:s("tBsP").default},name:"home",data:function(){return{showN:!1,musicSwitch:!1}},created:function(){localStorage.listName="精品小说"},computed:{showName:function(){var t=localStorage.userName;return t||!1},listName:function(){return this.$store.state.home.listName},showHeader:function(){return this.$store.state.home.showHeader}},methods:{showNav:function(){this.showN=!this.showN},back:function(){this.$router.go(-1)},showMusic:function(){this.musicSwitch=!this.musicSwitch}},watch:{$route:function(t){switch(t.path){case"/":this.$store.commit("changeListName","精品小说");break;case"/cate":this.$store.commit("changeListName","分类");break;case"/seniority":this.$store.commit("changeListName","排行");break;case"/booksearch":this.$store.commit("changeListName","搜索");break;case"/bookinformation":this.$store.commit("changeListName","书籍详情");break;case"/bookinformatecatelog":this.$store.commit("changeListName","书籍目录")}}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("music",{attrs:{musicSwitch:t.musicSwitch},on:{showMusic:t.showMusic}}),t._v(" "),s("header",{directives:[{name:"show",rawName:"v-show",value:t.showHeader,expression:"showHeader"}],staticClass:"main--header"},[s("section",{directives:[{name:"show",rawName:"v-show",value:"/"!=t.$route.path,expression:"$route.path != '/'"}],staticClass:"back-icon",on:{click:t.back}}),t._v(" "),s("section",{staticClass:"main--header-l"},[t._v(t._s(t.listName))]),t._v(" "),s("ul",{staticClass:"main--header-r"},[t.showName?s("router-link",{staticClass:"main--header-r-l3",attrs:{to:"login",tag:"li"}},[t._v(t._s(t.showName))]):s("router-link",{staticClass:"main--header-r-l1",attrs:{to:"login",tag:"li"}}),t._v(" "),s("li",{staticClass:"main--header-r-l2",on:{click:t.showNav}})],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showHeader,expression:"showHeader"}],staticClass:"header-pad"}),t._v(" "),s("keep-alive",[t.$route.meta.keepAlive?s("router-view"):t._e()],1),t._v(" "),t.$route.meta.keepAlive?t._e():s("router-view"),t._v(" "),s("leftNav",{attrs:{showJ:t.showN},on:{showMusic:t.showMusic,changeShowM:t.showNav}})],1)},staticRenderFns:[]};var c=s("VU/8")(r,n,!1,function(t){s("QQQl")},"data-v-43495a03",null);e.default=c.exports}});
//# sourceMappingURL=7.7cb18ea3ff0692604b03.js.map