webpackJsonp([4],{"5aHD":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("P9l9"),a={components:{loading:s("cHIW").a},name:"list",data:function(){return{list:[],nameFrontNode:null,wordsFrontNode:null,sortFrontNode:null,headerList:[],middleList:[{words:"",name:"全部"},{words:"1",name:"20万字"},{words:"2",name:"20-100万字"},{words:"3",name:"100万字以上"}],footList:[{sort:"monthHot",name:"最热"},{sort:"updateTime",name:"最新"},{sort:"",name:"完结"}],page:1,loadJudge:!0,listJudge:!0,tag:1,barTitle:"最热",barJ:!1,bindJ:!0,addBindJ:!0}},computed:{firstCate:{get:function(){var t=this.$store.state.bookCategory.firstCate;return t||(t=localStorage.getItem("firstCate")),t},set:function(t){this.$store.dispatch({type:"triggerSecond",firstCate:t}),localStorage.firstCate=t}},cid:{get:function(){var t=localStorage.getItem("cid");return t||(t=this.$store.state.bookCategory.cid),t}},secondCate:{get:function(){var t=this.$store.state.bookCategory.secondCate;return t||(t=localStorage.getItem("secondCate")),t||(t=""),t},set:function(t){this.$store.dispatch({type:"triggerSecond",secondCate:t}),localStorage.secondCate=t}},words:{get:function(){var t=this.$store.state.bookCategory.words;return t||(t=localStorage.getItem("words")),t||(t=""),t},set:function(t){this.$store.dispatch({type:"triggerWords",words:t}),localStorage.words=t}},sort:{get:function(){var t=this.$store.state.bookCategory.sort;return t||(t=localStorage.getItem("sort")),t},set:function(t){this.$store.dispatch({type:"triggerSort",sort:t}),localStorage.sort=t}}},created:function(){if(this.$store.commit("changeListName",localStorage.getItem("firstCate")),localStorage.secondCate="",localStorage.words=0,localStorage.sort="monthHot",this.$store.dispatch({type:"triggerSecond",secondCate:""}),this.$store.dispatch({type:"triggerWords",words:0}),this.$store.dispatch({type:"triggerSort",sort:"monthHot"}),this.page=1,1==localStorage.sex){var t=localStorage.girlLN;localStorage.secondCate=t,this.$store.dispatch({type:"triggerSecond",secondCate:t})}this.getHeader(),this.getList()},mounted:function(){document.getElementsByClassName("bookList");this.addBindJ&&(this.addBindJ=!1,window.addEventListener("scroll",this.showFooter,!1))},methods:{goTop:function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(t){clearTimeout(t)},s=document.body.scrollTop||document.documentElement.scrollTop,o=s/24>>0;function a(){s>=0?(s-=o,document.documentElement.scrollTop=document.body.scrollTop=s,a.rafTimer=t(a)):(document.body.scrollTop=0,e(a.rafTimer))}console.log(o,s,24),a.rafTimer=t(a)},showFooter:function(){var t=this,e=document.getElementsByClassName("header")[0].getBoundingClientRect().bottom;this.barJ=e<=0;var s=document.getElementsByClassName("recommend--body--ul--li");s[s.length-1].getBoundingClientRect().bottom-document.documentElement.clientHeight<120&&this.bindJ&&(this.bindJ=!1,setTimeout(function(){t.page++,t.getList()},300))},changeInfoBook:function(t){var e=t.currentTarget.children[1].firstChild.getAttribute("bid");this.$store.dispatch({type:"triggerBookId",id:e}),localStorage.setItem("bookId",e)},selectColor:function(t,e){var s=null;switch(t){case 0:s=this.nameFrontNode;break;case 1:s=this.wordsFrontNode;break;case 2:s=this.sortFrontNode}if(null==s)switch(e.target.parentNode.firstChild.classList.remove("hoverG"),e.target.classList.add("hoverG"),t){case 0:this.nameFrontNode=e.target;break;case 1:this.wordsFrontNode=e.target;break;case 2:this.sortFrontNode=e.target}else if(s!=e.target){switch(s.classList.remove("hoverG"),t){case 0:this.nameFrontNode=e.target;break;case 1:this.wordsFrontNode=e.target;break;case 2:this.sortFrontNode=e.target}e.target.classList.add("hoverG")}},changeProp:function(t){this.page=1,this.loadJudge=!0;var e=t.target.getAttribute("name"),s=t.target.getAttribute("words"),o=t.target.getAttribute("sort"),a=t.target.getAttribute("tag");if(a&&(this.tag=a),e&&(this.secondCate=e,this.barTitle=this.selectColor(0,t)),""==e&&(this.firstCate=localStorage.getItem("listName"),a=1,this.secondCate="",this.selectColor(0,t)),(s||""==s)&&(this.words=s,this.selectColor(1,t)),o||""==o){switch(this.sort=o,o){case"monthHot":this.barTitle="最热";break;case"updateTime":this.barTitle="最新";break;default:this.barTitle="完结"}this.selectColor(2,t)}this.list=[],this.page=1,this.getList()},getList:function(){var t=this,e=localStorage.sex;1==this.tag&&0==e?Object(o.e)(this.page,this.words,this.firstCate,this.secondCate,this.sort,function(e){t.bindJ=!0,0!=e.length?Array.prototype.forEach.call(e,function(e){var s={};s.imgUrl=e.cover,s.bid=e.bid,s.bookName=e.title,s.authorName=e.author,s.introduction=e.desc,s.status=e.status,s.size=(e.words/1e4).toFixed(1)+"万字",s.class_name=e.category,t.list.push(s)}):t.loadJudge=!1}):1==this.tag&&1==e?Object(o.g)(this.page,this.words,this.secondCate,this.sort,function(e){0!=e.length?Array.prototype.forEach.call(e,function(e){var s={};s.imgUrl=e.cover,s.bid=e.bid,s.bookName=e.title,s.authorName=e.author,s.introduction=e.desc,s.status=e.status,s.size=(e.words/1e4).toFixed(1)+"万字",s.class_name=e.category,t.list.push(s)}):t.loadJudge=!1}):Object(o.f)(this.page,this.words,this.secondCate,this.sort,function(e){0!=e.length?Array.prototype.forEach.call(e,function(e){var s={};s.imgUrl=e.cover,s.bid=e.bid,s.bookName=e.title,s.authorName=e.author,s.introduction=e.desc,s.status=e.status,s.size=(e.words/1e4).toFixed(1)+"万字",s.class_name=e.category,t.list.push(s)}):t.loadJudge=!1})},getHeader:function(){var t=this,e=this.cid;Object(o.i)(e,function(e){t.headerList.push({name:"全部",relatedName:""}),e.class.forEach(function(e){var s={};s.id=e.id,s.name=e.name,s.tag=1,s.relatedName=e.relatedName,t.headerList.push(s)}),e.tag.forEach(function(e){var s={};s.id=e.id,s.name=e.name,s.tag=0,s.relatedName=e.relatedName,t.headerList.push(s)})})}},beforeDestroy:function(){window.removeEventListener("scroll",this.showFooter,!1)}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bookList"},[s("transition",{attrs:{name:"bar-fade",mode:"out-in"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.barJ,expression:"barJ"}],staticClass:"header-bar",on:{click:t.goTop}},[t._v(t._s(t.barTitle)),s("i",{staticClass:"b-icon"})])]),t._v(" "),s("header",{staticClass:"header"},[s("section",{staticClass:"header--list"},[s("ul",{staticClass:"header--list__ul"},[t._l(t.headerList,function(e,o){return 0===o?s("li",{key:o,staticClass:"header--list__ul__li hoverG",attrs:{tag:e.tag,name:e.relatedName},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()}),t._v(" "),t._l(t.headerList,function(e,o){return 0!==o?s("li",{key:o,staticClass:"header--list__ul__li",attrs:{tag:e.tag,name:e.relatedName},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()})],2)]),t._v(" "),s("section",{staticClass:"header--list"},[s("ul",{staticClass:"middle--list__ul"},[t._l(t.middleList,function(e,o){return 0===o?s("li",{key:o,staticClass:"middle--list__ul__li hoverG",attrs:{words:e.words},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()}),t._v(" "),t._l(t.middleList,function(e,o){return 0!==o?s("li",{key:o,staticClass:"middle--list__ul__li",attrs:{words:e.words},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()})],2)]),t._v(" "),s("section",{staticClass:"header--list"},[s("ul",{staticClass:"middle--list__ul"},[t._l(t.footList,function(e,o){return 0===o?s("li",{key:o,staticClass:"middle--list__ul__li hoverG",attrs:{sort:e.sort},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()}),t._v(" "),t._l(t.footList,function(e,o){return 0!==o?s("li",{key:o,staticClass:"middle--list__ul__li",attrs:{sort:e.sort},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()})],2)])]),t._v(" "),s("section",{staticClass:"recommend"},[s("div",{staticClass:"recommend--body"},[s("ul",{staticClass:"recommend--body--ul"},t._l(t.list,function(e,o){return s("router-link",{key:o,staticClass:"recommend--body--ul--li",attrs:{to:"bookinformation",tag:"li"},nativeOn:{click:function(e){return t.changeInfoBook(e)}}},[s("div",{staticClass:"recommend--body--ul--li__left"},[s("img",{directives:[{name:"lazyLoad",rawName:"v-lazyLoad",value:e.imgUrl,expression:"item.imgUrl"}],staticClass:"recommend--body--ul--li__left--img",attrs:{src:"",alt:e.bookName}})]),t._v(" "),s("div",{staticClass:"recommend--body--ul--li__right"},[s("h3",{staticClass:"recommend--body--ul--li__right--title",attrs:{bid:e.bid}},[t._v(t._s(e.bookName))]),t._v(" "),s("p",{staticClass:"recommend--body--ul--li__right--author"},[t._v(t._s(e.authorName))]),t._v(" "),s("p",{staticClass:"recommend--body--ul--li__right--info"},[t._v(t._s(e.introduction))]),t._v(" "),s("div",{staticClass:"recommend--body--ul--li__right--tags"},[0==e.status?s("span",{staticClass:"statNameblue"},[t._v("连载")]):s("span",{staticClass:"statNamered"},[t._v("完结")]),t._v(" "),s("span",{staticClass:"recommend--body--ul--li__right--tags--two"},[t._v(t._s(e.size))]),t._v(" "),s("span",{staticClass:"recommend--body--ul--li__right--tags--three"},[t._v(t._s(e.class_name))])])])])}))])]),t._v(" "),s("footer",{staticClass:"bookList--footer"},[t.loadJudge?s("div",{staticClass:"bookList--footer--text"},[t._v("\n      加载更多\n    ")]):s("div",{staticClass:"bookList--footer--textend"},[t._v("\n      没有更多\n    ")])])],1)},staticRenderFns:[]};var r=s("VU/8")(a,i,!1,function(t){s("V2iD")},"data-v-81514406",null);e.default=r.exports},LCHJ:function(t,e){},V2iD:function(t,e){},cHIW:function(t,e,s){"use strict";var o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading-box"},[e("img",{attrs:{src:s("eSFX"),alt:""}})])}]};var a=s("VU/8")({name:"loadingImg"},o,!1,function(t){s("LCHJ")},"data-v-5898b249",null);e.a=a.exports}});
//# sourceMappingURL=4.b675a9354ca0dc438c82.js.map