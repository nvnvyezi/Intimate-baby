webpackJsonp([6],{"5aHD":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("2cSH");var o=s("P9l9"),a={components:{loading:s("cHIW").a},name:"list",data:function(){return{list:[],nameFrontNode:null,wordsFrontNode:null,sortFrontNode:null,headerList:[],middleList:[{words:"",name:"全部"},{words:"1",name:"20万字"},{words:"2",name:"20-100万字"},{words:"3",name:"100万字以上"}],footList:[{sort:"monthHot",name:"最热"},{sort:"updateTime",name:"最新"},{sort:"",name:"完结"}],page:1,judge:!1,loadJudge:!0,listJudge:!0}},computed:{firstCate:{get:function(){var t=this.$store.state.bookCategory.firstCate;return t||(t=localStorage.getItem("firstCate")),t}},cid:{get:function(){var t=this.$store.state.bookCategory.cid;return t||(t=localStorage.getItem("cid")),t}},secondCate:{get:function(){var t=this.$store.state.bookCategory.secondCate;return t||(t=localStorage.getItem("secondCate")),t},set:function(t){this.$store.dispatch({type:"triggerSecond",secondCate:t}),localStorage.secondCate=t}},words:{get:function(){var t=this.$store.state.bookCategory.words;return t||(t=localStorage.getItem("words")),t},set:function(t){this.$store.dispatch({type:"triggerWords",words:t}),localStorage.words=t}},sort:{get:function(){var t=this.$store.state.bookCategory.sort;return t||(t=localStorage.getItem("sort")),t},set:function(t){this.$store.dispatch({type:"triggerSort",sort:t}),localStorage.sort=t}}},created:function(){localStorage.setItem("secondCate",""),localStorage.setItem("words",""),localStorage.setItem("sort","monthHot"),this.getHeader(),this.getList()},mounted:function(){var t=document.getElementsByClassName("bookList");t[0].addEventListener("touchstart",this.showFooter,!1),t[0].addEventListener("touchmove",this.showFooter,!1),t[0].addEventListener("touchend",this.showFooter,!1)},methods:{showFooter:function(){var t=this,e=(document.getElementsByClassName("header"),document.getElementsByClassName("bookList--footer")),s=document.getElementsByTagName("li"),o=s[s.length-1].getBoundingClientRect().bottom,a=document.documentElement.clientHeight;o-a<120&&(""==e[0].style.display||"none"==e[0].style.display)&&(e[0].style.display="block",e[0].scrollIntoView(!0),setTimeout(function(){t.page++,t.getList()},300)),o-a>150&&"block"==e[0].style.display&&(e[0].style.display="none")},changeInfoBook:function(t){var e=t.currentTarget.children[1].firstChild.getAttribute("bid");this.$store.dispatch({type:"triggerBookId",id:e}),localStorage.setItem("bookId",e)},selectColor:function(t,e){var s=null;switch(t){case 0:s=this.nameFrontNode;break;case 1:s=this.wordsFrontNode;break;case 2:s=this.sortFrontNode}if(null==s)switch(e.target.parentNode.firstChild.classList.remove("hoverG"),e.target.classList.add("hoverG"),t){case 0:this.nameFrontNode=e.target;break;case 1:this.wordsFrontNode=e.target;break;case 2:this.sortFrontNode=e.target}else if(s!=e.target){switch(s.classList.remove("hoverG"),t){case 0:this.nameFrontNode=e.target;break;case 1:this.wordsFrontNode=e.target;break;case 2:this.sortFrontNode=e.target}e.target.classList.add("hoverG")}},changeProp:function(t){this.judge=!1,this.page=1;var e=t.target.getAttribute("name"),s=t.target.getAttribute("words"),o=t.target.getAttribute("sort");(e||""==e)&&(this.secondCate=e,this.selectColor(0,t)),(s||""==s)&&(this.words=s,this.selectColor(1,t)),(o||""==o)&&(this.sort=o,this.selectColor(2,t)),this.list=[],this.getList()},getList:function(){var t=this,e=this.firstCate,s=this.secondCate;switch(e){case"现言":case"古言":case"幻言":case"校园":e=localStorage.getItem("firstCate1"),""==s&&(s=localStorage.getItem("secondCate1"))}window.fetch&&Object(o.a)(this.page,this.words,e,s,this.sort,function(e){t.judge=!0,0!=e.length?Array.prototype.forEach.call(e,function(e){var s={};s.imgUrl=e.cover,s.bid=e.bid,s.bookName=e.title,s.authorName=e.author,s.introduction=e.desc,s.status=e.status,s.size=(e.words/1e3).toFixed(1)+"万字",s.class_name=e.category,t.list.push(s)}):t.loadJudge=!1})},getHeader:function(){var t=this,e=this.cid;Object(o.c)(e,function(e){t.headerList.push({name:"全部",relatedName:""}),e.class.forEach(function(e){var s={};s.id=e.id,s.name=e.name,s.relatedName=e.relatedName,t.headerList.push(s)})})}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bookList"},[s("header",{staticClass:"header"},[s("section",{staticClass:"header--list"},[s("ul",{staticClass:"header--list__ul"},[t._l(t.headerList,function(e,o){return 0===o?s("li",{key:o,staticClass:"header--list__ul__li hoverG",attrs:{name:e.relatedName},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()}),t._v(" "),t._l(t.headerList,function(e,o){return 0!==o?s("li",{key:o,staticClass:"header--list__ul__li",attrs:{name:e.relatedName},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()})],2)]),t._v(" "),s("section",{staticClass:"header--list"},[s("ul",{staticClass:"middle--list__ul"},[t._l(t.middleList,function(e,o){return 0===o?s("li",{key:o,staticClass:"middle--list__ul__li hoverG",attrs:{words:e.words},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()}),t._v(" "),t._l(t.middleList,function(e,o){return 0!==o?s("li",{key:o,staticClass:"middle--list__ul__li",attrs:{words:e.words},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()})],2)]),t._v(" "),s("section",{staticClass:"header--list"},[s("ul",{staticClass:"middle--list__ul"},[t._l(t.footList,function(e,o){return 0===o?s("li",{key:o,staticClass:"middle--list__ul__li hoverG",attrs:{sort:e.sort},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()}),t._v(" "),t._l(t.footList,function(e,o){return 0!==o?s("li",{key:o,staticClass:"middle--list__ul__li",attrs:{sort:e.sort},on:{click:t.changeProp}},[t._v(t._s(e.name))]):t._e()})],2)])]),t._v(" "),t.judge?s("section",{staticClass:"recommend"},[s("div",{staticClass:"recommend--body"},[s("ul",{staticClass:"recommend--body--ul"},t._l(t.list,function(e,o){return s("router-link",{key:o,staticClass:"recommend--body--ul--li ddd",attrs:{to:"bookinformation",tag:"li"},nativeOn:{click:function(e){return t.changeInfoBook(e)}}},[s("div",{staticClass:"recommend--body--ul--li__left"},[s("img",{directives:[{name:"lazyLoad",rawName:"v-lazyLoad",value:e.imgUrl,expression:"item.imgUrl"}],staticClass:"recommend--body--ul--li__left--img",attrs:{src:"",alt:e.bookName}})]),t._v(" "),s("div",{staticClass:"recommend--body--ul--li__right"},[s("h3",{staticClass:"recommend--body--ul--li__right--title",attrs:{bid:e.bid}},[t._v(t._s(e.bookName))]),t._v(" "),s("p",{staticClass:"recommend--body--ul--li__right--author"},[t._v(t._s(e.authorName))]),t._v(" "),s("p",{staticClass:"recommend--body--ul--li__right--info"},[t._v(t._s(e.introduction))]),t._v(" "),s("div",{staticClass:"recommend--body--ul--li__right--tags"},[0==e.status?s("span",{staticClass:"statNameblue"},[t._v("连载")]):s("span",{staticClass:"statNamered"},[t._v("完结")]),t._v(" "),s("span",{staticClass:"recommend--body--ul--li__right--tags--two"},[t._v(t._s(e.size))]),t._v(" "),s("span",{staticClass:"recommend--body--ul--li__right--tags--three"},[t._v(t._s(e.class_name))])])])])}))])]):s("loading"),t._v(" "),s("footer",{staticClass:"bookList--footer"},[t.loadJudge?s("div",{staticClass:"bookList--footer--text"},[t._v("\n      加载更多\n    ")]):s("div",{staticClass:"bookList--footer--textend"},[t._v("\n      没有更多\n    ")])])],1)},staticRenderFns:[]};var r=s("VU/8")(a,i,!1,function(t){s("E3w2")},"data-v-772b2851",null);e.default=r.exports},E3w2:function(t,e){}});
//# sourceMappingURL=6.e1496bbe5e8f1f860bfa.js.map