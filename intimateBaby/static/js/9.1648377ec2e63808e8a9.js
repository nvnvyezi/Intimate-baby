webpackJsonp([9],{"5/T6":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("P9l9"),s={name:"bookSearch",data:function(){return{listName:"搜索",q:"",searchHistory:[],recommendData:[],refreshJudge:!0,localData:""}},created:function(){this.getrecomData()},methods:{changeInfoBook:function(t){var e=t.currentTarget.getAttribute("bid");this.$store.dispatch({type:"triggerBookId",id:e})},changeProp:function(t){this.$store.dispatch({type:"triggerSearchData",data:t.target.innerText}),localStorage.searchData=t.target.innerText},clearHistory:function(){localStorage.removeItem("searchHistory"),this.localData=null},clearHistoryOne:function(t){var e=t.target.parentNode.getAttribute("index"),a=[];null!==localStorage.getItem("searchHistory")&&(a=localStorage.getItem("searchHistory").split(",")),a.splice(e,1),this.localData=a,localStorage.setItem("searchHistory",a)},addrefresh1:function(){var t=this;if(this.refreshJudge){var e=document.getElementsByClassName("recommend--ul")[0];e.style.height=e.offsetHeight+"px",this.refreshJudge=!1,this.getrecomData();var a=document.getElementsByClassName("refresh__box--icon");a[0].classList.add("refreshing"),setTimeout(function(){t.refreshJudge=!0,a[0].classList.remove("refreshing")},1e3)}},getrecomData:function(){var t=this;this.recommendData=[],Object(r.q)(function(e){e.forEach(function(e){var a={};a.bid=e.bookid,a.title=e.title.length>5?e.title.slice(0,4)+"...":e.title,t.recommendData.push(a)})})}},watch:{$route:function(t){if("bookSearch"==t.name)try{this.localData=localStorage.getItem("searchHistory").split(",")}catch(t){}}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"recommend",staticStyle:{"border-bottom":"0.7rem solid rgb(243, 243, 243)"}},[a("ul",{staticClass:"recommend--ul"},t._l(t.recommendData,function(e,r){return a("router-link",{key:r,staticClass:"recommend--ul--li",attrs:{tag:"li",to:"bookinformation",bid:e.bid},nativeOn:{click:function(e){return t.changeInfoBook(e)}}},[t._v(t._s(e.title))])})),t._v(" "),a("div",{staticClass:"refresh__box",on:{click:t.addrefresh1}},[a("span",{staticClass:"refresh__box--text"},[t._v("换一换")]),t._v(" "),a("span",{staticClass:"refresh__box--icon"})])]),t._v(" "),a("div",{staticClass:"history"},[a("header",{staticClass:"history--header"},[a("h3",{staticClass:"history--header--h3"},[t._v("搜索历史")]),t._v(" "),a("span",{staticClass:"history--header--delete",on:{click:t.clearHistory}},[t._v("删除")])]),t._v(" "),a("ul",{staticClass:"history--ul"},t._l(t.localData,function(e,r){return a("router-link",{key:r,staticClass:"history--ul--li",attrs:{to:"booksearchdata",tag:"li",index:r},nativeOn:{click:function(e){return t.changeProp(e)}}},[t._v("\n        "+t._s(e)+"\n        "),a("i",{staticClass:"history--ul--li--cancel",on:{click:function(e){return e.preventDefault(),t.clearHistoryOne(e)}}})])}))])])},staticRenderFns:[]};var o=a("VU/8")(s,i,!1,function(t){a("qJIA")},"data-v-74e5f9c7",null);e.default=o.exports},qJIA:function(t,e){}});
//# sourceMappingURL=9.1648377ec2e63808e8a9.js.map